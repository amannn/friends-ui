(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(t,e,r){t.exports={root:"Line_root__3jarq"}},168:function(t,e,r){t.exports={root:"Person_root__wsqIO"}},169:function(t,e,r){t.exports={friend:"Friends_friend__1ZL6Y"}},171:function(t,e,r){t.exports=r(492)},479:function(t,e,r){t.exports=r.p+"static/media/image-2.3d6d2c45.png"},480:function(t,e,r){t.exports=r.p+"static/media/image-3.1a569b91.png"},481:function(t,e,r){t.exports=r.p+"static/media/image-4.2ab9702c.png"},482:function(t,e,r){t.exports=r.p+"static/media/image-5.f795e502.png"},483:function(t,e,r){t.exports=r.p+"static/media/image-6.9483b9d8.png"},484:function(t,e,r){t.exports=r.p+"static/media/image-7.58d77a0a.png"},485:function(t,e,r){t.exports=r.p+"static/media/image-8.137e95a7.png"},486:function(t,e,r){t.exports=r.p+"static/media/image-9.ab93e925.png"},487:function(t,e,r){t.exports=r.p+"static/media/image-10.1e97e195.png"},488:function(t,e,r){t.exports=r.p+"static/media/image-11.bd3bcc26.png"},489:function(t,e,r){t.exports=r.p+"static/media/image-1.ab1b22e1.png"},490:function(t,e,r){},492:function(t,e,r){"use strict";r.r(e);var n=r(2),i=r.n(n),o=r(165),a=r.n(o),s=r(13),u=function(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth}};var c=function(t){return{offsetHeight:t?t.offsetHeight:void 0,offsetWidth:t?t.offsetWidth:void 0}};var f=r(59),p=r.n(f),d=function(t){return t*t},l={applyRepulsion:function(t,e,r){var n=r+(arguments.length>3&&void 0!==arguments[3]?arguments[3]:40),i=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),a=0;if(Math.sqrt(Math.pow(i,2)+Math.pow(o,2))<n){var s=Math.sqrt(Math.pow(n,2)-Math.pow(o,2));a=d((a=s-i)/r)*r,e.x<t.x&&(a*=-1)}return{y:e.y,x:e.x+a}},clamp:function(t,e,r){return t<e?e:t>r?r:t},interpolateRange:function(t){var e=t.inputStart,r=void 0===e?0:e,n=t.inputEnd,i=void 0===n?1:n,o=t.outputStart,a=void 0===o?0:o,s=t.outputEnd,u=void 0===s?1:s,c=t.current,f=t.clamp,p=(c-r)/(i-r);return(void 0===f||f)&&(p=this.clamp(p,0,1)),this.interpolate(a,u,p)},interpolate:function(t,e,r){return t+(e-t)*r},radiantToDegress:function(t){return t*(180/Math.PI)}};var m=r(166),g=r.n(m);var b=function(t){var e=t.hideOffsetBottom,r=t.hideOffsetTop,o=t.sourceOrigin$,a=t.style,u=t.targetOrigin$,c=Object(n.useRef)(null);return Object(n.useEffect)(function(){var t=u.withLatestFrom(o).subscribe(function(t){var n=Object(s.a)(t,2),i=n[0],o=n[1],a=c.current,u=o.y-i.y>e||i.y-o.y>r;a.style.opacity=u?0:1,u||(a.style.transform=function(t){var e=t.sourceOrigin,r=t.targetOrigin,n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),a=l.radiantToDegress(Math.atan(i/n));return r.y<e.y&&(a*=-1),r.x<e.x&&(a=180-a),"rotate(".concat(a,"deg) scaleX(").concat(o,")")}({sourceOrigin:o,targetOrigin:i}))});return function(){return t.unsubscribe()}},[e,r,u,o]),i.a.createElement("div",{className:g.a.root,ref:c,style:a})},h=r(170),v=r(26),O=r.n(v),y=r(167),x=r.n(y),w=r(168),E=r.n(w),j={className:O.a.string,portrait:O.a.string.isRequired,style:O.a.object,size:O.a.number},S=Object(n.forwardRef)(function(t,e){var r=t.className,n=t.portrait,o=t.style,a=t.size;return i.a.createElement("div",{className:x()(E.a.root,r),ref:e,style:Object(h.a)({},o,{width:a,height:a,backgroundImage:"url(".concat(n,")")})})});S.propTypes=j;var z=S;var M=function(t){var e=t.className,r=t.friend,o=t.friendOrigin$,a=t.portraitSize,u=t.userOrigin$,c=t.userPosition,f=Object(n.useRef)(null);return Object(n.useEffect)(function(){var t=o.withLatestFrom(u).subscribe(function(t){var e=Object(s.a)(t,2),r=e[0],n=e[1],i=f.current;i.style.transform=function(t){var e=t.friendOrigin,r=t.portraitSize,n=e.x-r/2,i=e.y-r/2;return"translate(".concat(n,"px, ").concat(i,"px)")}({friendOrigin:r,portraitSize:a}),i.style.opacity=function(t){var e=t.friendOrigin,r=t.portraitSize,n=t.userOrigin,i=t.userPosition;return l.interpolateRange({inputStart:n.y-r,inputEnd:n.y+i.bottom+r,outputStart:1,outputEnd:0,current:e.y})}({friendOrigin:r,portraitSize:a,userOrigin:n,userPosition:c})});return function(){return t.unsubscribe()}},[o,a,u,c]),i.a.createElement(z,{className:e,portrait:r.portrait,ref:f,size:a})},_=r(169),N=r.n(_);function P(t){var e,r=t.friends,o=t.portraitSize,a=t.offsetHeight,u=t.scrollerNode,c=t.userPosition,f=Object(n.useState)(void 0),d=Object(s.a)(f,2),m=d[0],g=d[1];if(Object(n.useEffect)(function(){return g(function(t){var e=t.friends,r=t.paddingSides,n=t.portraitSize,i=t.offsetWidth,o=t.offsetY,a=t.scrollerNode,s=t.userPosition,u=t.offsetHeight,c=e.map(function(t,e){var a=r+n/2+Math.random()*(i/2-2*r-n);return e%2!==0&&(a+=i/2),{x:a,y:(e+1)*(n+o)}}),f=p.a.Observable.interval(0,p.a.Scheduler.animationFrame).map(function(){return{x:s.left+n/2,y:a.scrollTop+u-s.bottom-n/2}}),d=f.map(function(t){return c.map(function(e){return l.applyRepulsion(t,e,n)})});return{userOrigin$:f,friendOrigins$:d}}(t))},[t]),e=u,Object(n.useEffect)(function(){var t=setTimeout(function(){e.scrollTop=e.scrollHeight},50);return function(){return clearTimeout(t)}},[e]),!m)return null;var h=m.userOrigin$,v=m.friendOrigins$;return i.a.createElement("div",null,r.map(function(t,e){var r=v.map(function(t){return t[e]});return i.a.createElement(n.Fragment,{key:t.id},i.a.createElement(M,{className:N.a.friend,friend:t,friendOrigin$:r,portraitSize:o,userOrigin$:h,userPosition:c}),i.a.createElement(b,{hideOffsetBottom:a-o/2,hideOffsetTop:c.bottom+o,sourceOrigin$:h,style:{left:"50%",bottom:c.bottom+o/2},targetOrigin$:r}))}))}P.defaultProps={paddingSides:20,offsetY:40};var $=P,H=r(60),R=r.n(H);function L(t){var e,r=t.friends,o=t.portraitSize,a=t.user,f=t.userBottomMargin,p=Object(n.useRef)(null),d=function(){var t=Object(n.useState)(u()),e=Object(s.a)(t,2),r=e[0],i=e[1];return Object(n.useEffect)(function(){function t(){i(u())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},[]),r}(),l=function(t){var e=Object(n.useState)(c(t.current)),r=Object(s.a)(e,2),i=r[0],o=r[1];return Object(n.useLayoutEffect)(function(){function e(){o(c(t.current))}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[t]),i}(p),m=null!=p.current;return m&&(e={left:l.offsetWidth/2-o/2,bottom:f}),i.a.createElement("div",{className:R.a.root,ref:p,style:{height:d.innerHeight}},m&&i.a.createElement(n.Fragment,null,i.a.createElement($,{friends:r,offsetHeight:d.innerHeight,offsetWidth:l.offsetWidth,portraitSize:o,scrollerNode:p.current,userPosition:e}),i.a.createElement(z,{className:R.a.user,portrait:a.portrait,size:o,style:{bottom:e.bottom,left:(d.innerWidth-o)/2}})))}L.defaultProps={portraitSize:80,userBottomMargin:40};var T=L,W=[r(479),r(480),r(481),r(482),r(483),r(484),r(485),r(486),r(487),r(488)],q={user:{portrait:r(489)},friends:Array(30).fill(null).map(function(t,e){return{id:e,portrait:W[e%W.length]}})},F=(r(490),i.a.createElement(T,q)),B=document.getElementById("root");a.a.createRoot(B).render(F)},60:function(t,e,r){t.exports={root:"App_root__3wy81",user:"App_user__bPXfM"}}},[[171,2,1]]]);
//# sourceMappingURL=main.e6847ebb.chunk.js.map