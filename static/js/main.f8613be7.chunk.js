(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(t,e,r){t.exports={root:"Line_root__3jarq"}},168:function(t,e,r){t.exports={root:"Person_root__wsqIO"}},169:function(t,e,r){t.exports={friend:"Friends_friend__1ZL6Y"}},172:function(t,e,r){t.exports=r(493)},480:function(t,e,r){t.exports=r.p+"static/media/image-2.3d6d2c45.png"},481:function(t,e,r){t.exports=r.p+"static/media/image-3.1a569b91.png"},482:function(t,e,r){t.exports=r.p+"static/media/image-4.2ab9702c.png"},483:function(t,e,r){t.exports=r.p+"static/media/image-5.f795e502.png"},484:function(t,e,r){t.exports=r.p+"static/media/image-6.9483b9d8.png"},485:function(t,e,r){t.exports=r.p+"static/media/image-7.58d77a0a.png"},486:function(t,e,r){t.exports=r.p+"static/media/image-8.137e95a7.png"},487:function(t,e,r){t.exports=r.p+"static/media/image-9.ab93e925.png"},488:function(t,e,r){t.exports=r.p+"static/media/image-10.1e97e195.png"},489:function(t,e,r){t.exports=r.p+"static/media/image-11.bd3bcc26.png"},490:function(t,e,r){t.exports=r.p+"static/media/image-1.ab1b22e1.png"},491:function(t,e,r){},493:function(t,e,r){"use strict";r.r(e);var n=r(2),i=r.n(n),o=r(165),a=r.n(o),s=r(13),u=function(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth}};var c=function(t){return{offsetHeight:t?t.offsetHeight:void 0,offsetWidth:t?t.offsetWidth:void 0}};var f=r(170),p=r(59),d=r.n(p),l=function(t){return t*t},m={applyRepulsion:function(t,e,r){var n=r+(arguments.length>3&&void 0!==arguments[3]?arguments[3]:40),i=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),a=0;if(Math.sqrt(Math.pow(i,2)+Math.pow(o,2))<n){var s=Math.sqrt(Math.pow(n,2)-Math.pow(o,2));a=l((a=s-i)/r)*r,e.x<t.x&&(a*=-1)}return{y:e.y,x:e.x+a}},clamp:function(t,e,r){return t<e?e:t>r?r:t},interpolateRange:function(t){var e=t.inputStart,r=void 0===e?0:e,n=t.inputEnd,i=void 0===n?1:n,o=t.outputStart,a=void 0===o?0:o,s=t.outputEnd,u=void 0===s?1:s,c=t.current,f=t.clamp,p=(c-r)/(i-r);return(void 0===f||f)&&(p=this.clamp(p,0,1)),this.interpolate(a,u,p)},interpolate:function(t,e,r){return t+(e-t)*r},radiantToDegress:function(t){return t*(180/Math.PI)}};var g=r(166),b=r.n(g);var v=function(t){var e=t.hideOffsetBottom,r=t.hideOffsetTop,o=t.sourceOrigin$,a=t.style,u=t.targetOrigin$,c=Object(n.useRef)(null);return Object(n.useEffect)(function(){var t=u.withLatestFrom(o).subscribe(function(t){var n=Object(s.a)(t,2),i=n[0],o=n[1],a=c.current,u=o.y-i.y>e||i.y-o.y>r;a.style.opacity=u?0:1,u||(a.style.transform=function(t){var e=t.sourceOrigin,r=t.targetOrigin,n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),a=m.radiantToDegress(Math.atan(i/n));return r.y<e.y&&(a*=-1),r.x<e.x&&(a=180-a),"rotate(".concat(a,"deg) scaleX(").concat(o,")")}({sourceOrigin:o,targetOrigin:i}))});return function(){return t.unsubscribe()}},[e,r,u,o,c.current]),i.a.createElement("div",{className:b.a.root,ref:c,style:a})},h=r(171),O=r(26),y=r.n(O),x=r(167),w=r.n(x),E=r(168),j=r.n(E),S={className:y.a.string,portrait:y.a.string.isRequired,style:y.a.object,size:y.a.number},z=Object(n.forwardRef)(function(t,e){var r=t.className,n=t.portrait,o=t.style,a=t.size;return i.a.createElement("div",{className:w()(j.a.root,r),ref:e,style:Object(h.a)({},o,{width:a,height:a,backgroundImage:"url(".concat(n,")")})})});z.propTypes=S;var M=z;var _=function(t){var e=t.className,r=t.friend,o=t.friendOrigin$,a=t.portraitSize,u=t.userOrigin$,c=t.userPosition,f=Object(n.useRef)(null);return Object(n.useEffect)(function(){var t=o.withLatestFrom(u).subscribe(function(t){var e=Object(s.a)(t,2),r=e[0],n=e[1],i=f.current;i.style.transform=function(t){var e=t.friendOrigin,r=t.portraitSize,n=e.x-r/2,i=e.y-r/2;return"translate(".concat(n,"px, ").concat(i,"px)")}({friendOrigin:r,portraitSize:a}),i.style.opacity=function(t){var e=t.friendOrigin,r=t.portraitSize,n=t.userOrigin,i=t.userPosition;return m.interpolateRange({inputStart:n.y-r,inputEnd:n.y+i.bottom+r,outputStart:1,outputEnd:0,current:e.y})}({friendOrigin:r,portraitSize:a,userOrigin:n,userPosition:c})});return function(){return t.unsubscribe()}},[o,f.current,a,u,c]),i.a.createElement(M,{className:e,portrait:r.portrait,ref:f,size:a})},N=r(169),P=r.n(N);function $(t){var e=t.friends,r=t.portraitSize,o=t.offsetHeight,a=t.scrollerNode,u=t.userPosition,c=Object(n.useState)(void 0),p=Object(s.a)(c,2),l=p[0],g=p[1];if(Object(n.useEffect)(function(){return g(function(t){var e=t.friends,r=t.paddingSides,n=t.portraitSize,i=t.offsetWidth,o=t.offsetY,a=t.scrollerNode,s=t.userPosition,u=t.offsetHeight,c=e.map(function(t,e){var a=r+n/2+Math.random()*(i/2-2*r-n);return e%2!==0&&(a+=i/2),{x:a,y:(e+1)*(n+o)}}),f=d.a.Observable.interval(0,d.a.Scheduler.animationFrame).map(function(){return{x:s.left+n/2,y:a.scrollTop+u-s.bottom-n/2}}),p=f.map(function(t){return c.map(function(e){return m.applyRepulsion(t,e,n)})});return{userOrigin$:f,friendOrigins$:p}}(t))},Object(f.a)(Object.values(t))),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(n.useEffect)(function(){var e=setTimeout(function(){t.scrollTop=t.scrollHeight},50);return function(){return clearTimeout(e)}},e)}(a,[l]),!l)return null;var b=l.userOrigin$,h=l.friendOrigins$;return i.a.createElement("div",null,e.map(function(t,e){var a=h.map(function(t){return t[e]});return i.a.createElement(n.Fragment,{key:t.id},i.a.createElement(_,{className:P.a.friend,friend:t,friendOrigin$:a,portraitSize:r,userOrigin$:b,userPosition:u}),i.a.createElement(v,{debug:0===e,hideOffsetBottom:o-r/2,hideOffsetTop:u.bottom+r,sourceOrigin$:b,style:{left:"50%",bottom:u.bottom+r/2},targetOrigin$:a}))}))}$.defaultProps={paddingSides:20,offsetY:40};var H=$,R=r(60),L=r.n(R);function T(t){var e,r=t.friends,o=t.portraitSize,a=t.user,f=t.userBottomMargin,p=Object(n.useRef)(null),d=function(){var t=Object(n.useState)(u()),e=Object(s.a)(t,2),r=e[0],i=e[1];function o(){i(u())}return Object(n.useEffect)(function(){return window.addEventListener("resize",o),function(){return window.removeEventListener("resize",o)}},[]),r}(),l=function(t){var e=Object(n.useState)(c(t.current)),r=Object(s.a)(e,2),i=r[0],o=r[1];function a(){o(c(t.current))}return Object(n.useLayoutEffect)(function(){return a(),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}},[t]),i}(p),m=null!=p.current;return m&&(e={left:l.offsetWidth/2-o/2,bottom:f}),i.a.createElement("div",{className:L.a.root,ref:p,style:{height:d.innerHeight}},m&&i.a.createElement(n.Fragment,null,i.a.createElement(H,{friends:r,offsetHeight:d.innerHeight,offsetWidth:l.offsetWidth,portraitSize:o,scrollerNode:p.current,userPosition:e}),i.a.createElement(M,{className:L.a.user,portrait:a.portrait,size:o,style:{bottom:e.bottom,left:(d.innerWidth-o)/2}})))}T.defaultProps={portraitSize:80,userBottomMargin:40};var W=T,q=[r(480),r(481),r(482),r(483),r(484),r(485),r(486),r(487),r(488),r(489)],F={user:{portrait:r(490)},friends:Array(30).fill(null).map(function(t,e){return{id:e,portrait:q[e%q.length]}})},B=(r(491),i.a.createElement(W,F)),k=document.getElementById("root");a.a.createRoot(k).render(B)},60:function(t,e,r){t.exports={root:"App_root__3wy81",user:"App_user__bPXfM"}}},[[172,2,1]]]);
//# sourceMappingURL=main.f8613be7.chunk.js.map